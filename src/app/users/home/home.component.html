<div class="float-right">
  <div class="main-table">
    <div *ngIf="userProjects && !!userProjects.length">
      <h2>My Projects</h2>
      <p-table [columns]="projectColumns"
               [value]="userProjects  | paginate: { itemsPerPage: 10, currentPage: page[0], id: 'first'}"
               [rowTrackBy]="trackByFn" 
               class="p-table">
        <ng-template pTemplate="header">
          <tr>
            <th *ngFor="let col of projectColumns" 
                [pSortableColumn]="col.field">
              {{col.header}}
              <p-sortIcon [field]="col.field"></p-sortIcon>
            </th>
            <th class="twoIcons">Options</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" 
                     let-rowData 
                     let-columns="columns">
          <tr (dblclick)="informationForProject(project)">
            <td *ngFor="let col of columns">
              {{ rowData[col.field] }}
            </td>
            <td>
            <p-button title="List all progresses" 
                      [icon]="'fa fa-tasks'" 
                      (click)="showProjectTasks=true">
            </p-button>
            <p-button title="Information"  
                      [icon]="'fa fa-info'" 
                      (click)="informationForProject(rowData)"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    <pagination-controls (pageChange)="page[0] = $event" id="first"></pagination-controls>
  </div>
  <h1 *ngIf="userProjects && userProjects.length==0"><span class="fa fa-exclamation-circle"></span> You have no projects assigned to you yet.</h1>
</div>

<div>
    <app-list-users [users]="relatedUsers" 
                    [showOptions]="true" 
                    [project]="project" 
                    (userInfoClick)=userInfo($event)></app-list-users>
</div>

<p-dialog header="Information for {{selectedProject?.title}}"  
          [(visible)]="showUsersInProject"
          [style]="{width: '600px', height: 'auto'}" 
          [modal]="true" 
          [dismissableMask]="true"
          [responsive]="true"
          class="information-table">
  <div>
    <app-list-users [users]="usersInProject" 
                    [project]="selectedProject" 
                    [showOptions]="false"></app-list-users>
  </div>
</p-dialog>

<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
